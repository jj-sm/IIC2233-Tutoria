# S8 - Serialización y Networking

---

## Serialización

### JSON

> Casi iguales a los diccionarios de Python

#### Conversión

> $\verb|str| \to (\verb|loads|) \to \verb|Python Object|$

> $\verb|Python Object| \to (\verb|dumps|) \to \verb|str (json)|$

#### Archivos

Misma lógica de la [conversión](#conversión), pero sin la 's', entonces `dump` y `load`.

```python
datos = [
    {
        "nombre": "Juan",
        "edad": 10,
        "curso": 3
    },
    {
        "nombre": "María",
        "edad": 11,
        "curso": 3
    },
]

with open("datos_out.json", "w") as f:
    json.dump(datos, f)
```

```python
with open("datos_in.json", "r") as f:
    datos_cargados = json.load(f)
```

Para objetos personalizados de python también se pueden serializar usando `__dict__()`. Y también es posible serializar el `json` sobreescribiendo el método `default` de `json.JSONEncoder`.

## Networking

### Conceptos

- IP: 192.168.1.11
- Puertos: 192.168.1.11:80
- Protocolos:
    - TCP (Confiable)
    - UDP (Rápido)


![img](https://i.programmerhumor.io/2025/08/b95c398850882941a18baa70afbe86db5b8f5dad19c284859f387b83316a12a9.jpeg)

## WebServices

### APIIIIIS

Existen distintos tipos de APIs:

- REST API
- GraphQL API
- ...

En IIC2233 se manejan REST APIs, que usan el protocolo HTTP que a su vez usa los siguientes 5 métodos:

- `GET`
- `POST`
- `PATCH`
- `PUT`
- `DELETE`

> Cada **request** da distintos códigos de estado: [http Status Codes](https://http.cat)

Partes de las llamadas a las APIs:

- Requests:
    - Solicitud
    - Header
    - `\n`
    - Body (Opcional)

- Status:
    - Status
    - Header
    - `\n`
    - Body (Opcional)

### `requests`

> [API](https://tutor-iic2233.jjsm.science/docs#/)

```python
import requests

url = "https://tutor-iic2233.jjsm.science/iic/"
respuesta = requests.get(url)

print(respuesta.status_code)
print(respuesta.json())
```

La puede tener una autorización: `X-API Key: cSkgdxOWgkTZN0rVTNuHa-8vExHAejhr3Vqn38du384` o `Authorization Bearer cSkgdxOWgkTZN0rVTNuHa-8vExHAejhr3Vqn38du384`

```python
import requests

API_KEY = 'fromenv'

region = 'SC'
url = f'https://api-dev-airac-updater.jjsm.science/airports/info/count/{region}'

header = {'X-API-Key': API_KEY}

response = requests.get(url, headers=header)
print(response.json())
```

> TODO: Completar la función: `get_external_votes()` en `utils.py`.

El _endpoint_ de la API se encuentra en: [https://tutor-iic2233.jjsm.science/iic/votes/](https://tutor-iic2233.jjsm.science/docs#/iic/), además su método es `POST` y se tiene que colocar en el _Body_ la información de los candidatos.

Por ejemplo:

```python
candidatos = {
    "candidate_ids": [
        'laura',
        'juan',
        'juana'
    ],
    "interval": 3
}
```

